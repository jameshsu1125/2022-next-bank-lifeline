- [Vulnerablility Scanning 弱掃](#vulnerablility-scanning-弱掃)
    - [GTM 產出的 Sanbox / CSP 相關議題](#gtm-產出的-sanbox--csp-相關議題)
      - [1. sandbox](#1-sandbox)
      - [2. CSP](#2-csp)
    - [由 GTM 來的 js getElementsByTagName](#由-gtm-來的-js-getelementsbytagname)
    - [誤掃已應該已刪除的 js](#誤掃已應該已刪除的-js)
    - [來自於 648.min.js cookie](#來自於-648minjs-cookie)
    - [來自於 133.min.js 到 slice](#來自於-133minjs-到-slice)

# Vulnerablility Scanning 弱掃

### GTM 產出的 Sanbox / CSP 相關議題

#### 1. sandbox

```
解決方式：已經在ifram 加上一個加了一個 sanbox attribute並且沒有allow任何地方來的內容
```

<img width="726" alt="截圖 2022-11-28 下午2 38 00" src="https://user-images.githubusercontent.com/70932507/204210174-918f88ce-3d7c-4f3b-b827-9170d7ba84f9.png">

![messageImage_1669617217190](https://user-images.githubusercontent.com/70932507/204210352-5f4c514b-1092-41d9-88bc-c3aebc2c71e8.jpg)

[Reference](https://www.gushiciku.cn/pl/pInk/zh-tw)

#### 2. CSP

```
解決方式：案GTM官方的方式新增meta以及帶入官方產出的hash content
```

<img width="721" alt="截圖 2022-11-28 下午2 43 38" src="https://user-images.githubusercontent.com/70932507/204211127-e6c9ed4b-a45b-493d-9b24-c380f52d9930.png">

![image](https://user-images.githubusercontent.com/70932507/204211980-bd47b604-08ff-45ed-92ab-be0c35d2f1a8.png)

[Reference](https://developers.google.com/tag-platform/tag-manager/web/csp)

### 由 GTM 來的 js getElementsByTagName

```
解決方式：當引入gtm.js之後，該js有多處使用該script，故無法解決
```

<img width="733" alt="截圖 2022-11-28 下午3 17 55" src="https://user-images.githubusercontent.com/70932507/204216846-3abe6b31-5f6a-4bd4-bc7d-c12a38832f41.png">

<img width="1790" alt="截圖 2022-11-28 下午3 16 22" src="https://user-images.githubusercontent.com/70932507/204216655-843a271b-6583-405a-9e40-7bbed858f6fa.png">

[Reference](https://googletagmanager.com/gtm.js?id=GTM-PNSGW4K)

### 誤掃已應該已刪除的 js

```
解決方式：該script來自於facebook sdk的js，但是該專案後來沒有納入該功能，該檔案應該要從主機內部移除即可
```

<img width="749" alt="截圖 2022-11-28 下午3 21 39" src="https://user-images.githubusercontent.com/70932507/204217507-3876c1dc-c9be-417f-ab99-d359b3b7e649.png">

<img width="751" alt="截圖 2022-11-28 下午3 21 42" src="https://user-images.githubusercontent.com/70932507/204217514-5a0db110-156e-4efa-b186-c61303cfb637.png">

### 來自於 648.min.js cookie

```
解決方式：該script來自於知名api框架，即便沒有引入cookie也無法移出該script
```

<img width="720" alt="截圖 2022-11-28 下午3 43 07" src="https://user-images.githubusercontent.com/70932507/204221153-440c5161-9fdd-423b-ac5f-b5bb69788f7b.png">

<img width="1792" alt="截圖 2022-11-28 下午3 38 21" src="https://user-images.githubusercontent.com/70932507/204220415-2bd4d594-3fae-4a5b-82bd-6fb5644608f4.png">

[axios](https://www.npmjs.com/package/axios)
[axios cookie](https://github.com/axios/axios/blob/v1.x/lib/helpers/cookies.js)
[can not remove cookie from axios](https://github.com/axios/axios/issues/2472)

### 來自於 133.min.js 到 slice

```
解決方式：該檔案應該是誤掃，因為facebook分享已經從該專案移除，133.min.js因該從主機中移除
```

<img width="742" alt="截圖 2022-11-28 下午3 51 51" src="https://user-images.githubusercontent.com/70932507/204222811-d16e7456-8bf8-434c-be7c-c72aa9261d2f.png">

[全部 js 的 list](https://github.com/jameshsu1125/2022-next-bank-lifeline/tree/gh-pages/bundle/js)
